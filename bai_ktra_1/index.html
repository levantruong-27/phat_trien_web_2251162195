<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lý nhân viên</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }
      .top-bar {
        background-color: white;
        padding: 1rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
      }
      .manage-header {
        background-color: #3b5998;
        color: white;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .manage-header h4 {
        margin: 0;
      }
      .btn-group .btn {
        margin-left: 10px;
      }
    </style>
  </head>
  <body>
    <!-- Thanh top -->
    <div class="top-bar">
      <div><strong>TLU</strong> | Home > Employees</div>
      <div class="input-group w-25">
        <input type="text" class="form-control" placeholder="Search..." />
        <button class="btn btn-success">Search</button>
      </div>
    </div>

    <!-- Phần quản lý -->
    <div class="container mt-4">
      <div class="manage-header mb-3">
        <h4>Manage <strong>Employees</strong></h4>
        <div class="btn-group">
          <button class="btn btn-danger">
            <i class="bi bi-trash"></i> Delete
          </button>
          <button class="btn btn-success" onclick="hienForm()">
            <i class="bi bi-plus-circle"></i> Add New Employee
          </button>
        </div>
      </div>

      <table class="table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th><input type="checkbox" /></th>
            <th>Name</th>
            <th>Email</th>
            <th>Address</th>
            <th>Phone</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="bangNhanVien">
          <!-- Dữ liệu JS sẽ render vào đây -->
        </tbody>
      </table>
    </div>

    <!-- Form Modal -->
    <div class="modal fade" id="formModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Add Employee</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <input
              type="text"
              id="name"
              class="form-control mb-2"
              placeholder="Full name"
            />
            <input
              type="email"
              id="email"
              class="form-control mb-2"
              placeholder="Email address"
            />
            <input
              type="text"
              id="address"
              class="form-control mb-2"
              placeholder="Address"
            />
            <input
              type="text"
              id="phone"
              class="form-control mb-2"
              placeholder="Phone (10 digits)"
            />
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" onclick="luuNhanVien()">
              Save
            </button>
            <button class="btn btn-secondary" data-bs-dismiss="modal">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      let duLieu = [
        {
          name: "Thomas Hardy",
          email: "thomashardy@mail.com",
          address: "89 Chiaroscuro Rd, Portland, USA",
          phone: "0171555222",
        },
        {
          name: "Dominique Perrier",
          email: "dominiqueperrier@mail.com",
          address: "Obere Str. 57, Berlin, Germany",
          phone: "0313555735",
        },
        {
          name: "Maria Anders",
          email: "mariaanders@mail.com",
          address: "25, rue Lauriston, Paris, France",
          phone: "0503559931",
        },
        {
          name: "Fran Wilson",
          email: "franwilson@mail.com",
          address: "C/ Araquil, 67, Madrid, Spain",
          phone: "0204619573",
        },
        {
          name: "Martin Blank",
          email: "martinblank@mail.com",
          address: "Via Monte Bianco 34, Turin, Italy",
          phone: "0480631209",
        },
      ];

      function renderBang() {
        const tbody = document.getElementById("bangNhanVien");
        tbody.innerHTML = "";
        duLieu.forEach((nv, i) => {
          tbody.innerHTML += `
          <tr>
            <td><input type="checkbox" /></td>
            <td>${nv.name}</td>
            <td>${nv.email}</td>
            <td>${nv.address}</td>
            <td>${nv.phone}</td>
            <td>
              <button class="btn btn-warning btn-sm" onclick="sua(${i})"><i class="bi bi-pencil"></i></button>
              <button class="btn btn-danger btn-sm" onclick="xoa(${i})"><i class="bi bi-trash"></i></button>
            </td>
          </tr>`;
        });
      }

      let indexDangSua = -1;

      function hienForm() {
        indexDangSua = -1;
        document.getElementById("modalTitle").innerText = "Add Employee";
        document.getElementById("name").value = "";
        document.getElementById("email").value = "";
        document.getElementById("address").value = "";
        document.getElementById("phone").value = "";
        const modal = new bootstrap.Modal(document.getElementById("formModal"));
        modal.show();
      }

      function sua(i) {
        const nv = duLieu[i];
        indexDangSua = i;
        document.getElementById("modalTitle").innerText = "Edit Employee";
        document.getElementById("name").value = nv.name;
        document.getElementById("email").value = nv.email;
        document.getElementById("address").value = nv.address;
        document.getElementById("phone").value = nv.phone;
        new bootstrap.Modal(document.getElementById("formModal")).show();
      }

      function luuNhanVien() {
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const address = document.getElementById("address").value.trim();
        const phone = document.getElementById("phone").value.trim();

        if (!name || !email || !address || !phone) {
          alert("Vui lòng điền đầy đủ thông tin!");
          return;
        }

        if (!/^0\d{9}$/.test(phone)) {
          alert("Số điện thoại phải có 10 chữ số và bắt đầu bằng 0!");
          return;
        }

        const newNV = { name, email, address, phone };

        if (indexDangSua === -1) {
          duLieu.push(newNV);
        } else {
          duLieu[indexDangSua] = newNV;
        }

        renderBang();
        bootstrap.Modal.getInstance(
          document.getElementById("formModal")
        ).hide();
      }

      function xoa(i) {
        if (confirm("Bạn có chắc chắn muốn xoá không?")) {
          duLieu.splice(i, 1);
          renderBang();
        }
      }

      window.onload = renderBang;
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
